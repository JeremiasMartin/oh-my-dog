{% extends 'OhMyDogApp/base.html' %}

{% block content %}
  <h1>Solicitar turno</h1>
    {% if messages %}
   <ul class="messages">
       {% for message in messages %}
       <div id="msg"class="alert alert-{{ message.tags }}">
           {{ message }}
       </div>
       {% endfor %}
   </ul>
   {% endif %}
  <form method="post" id="solicitar-turno-form">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary" id="btn-solicitar-turno" disabled>Solicitar Turno</button>
  </form>

  <script>
    const form = document.getElementById('solicitar-turno-form');
    const btnSolicitarTurno = document.getElementById('btn-solicitar-turno');

    form.addEventListener('submit', (event) => {
      if (!validateForm()) {
        event.preventDefault();
      }
    });

    form.addEventListener('input', () => {
      validateForm();
    });

    // Validar campos al cargar la p√°gina
    validateForm();

    function validateForm() {
      const fecha = document.getElementById('id_fecha').value;
      const tipoAtencion = document.getElementById('id_tipo_atencion').value;

      if (fecha.trim() === '' || tipoAtencion.trim() === '') {
        btnSolicitarTurno.disabled = true;
        return false;
      } else {
        btnSolicitarTurno.disabled = false;
        return true;
      }
    }
  </script>
{% endblock %}
